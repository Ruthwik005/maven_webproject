pipeline {
    agent any

    tools {
        // Use Maven configured in Jenkins
        maven "MAVEN_HOME"
    }

    stages {

        stage('Clean Workspace') {
            steps {
                deleteDir()
            }
        }

        stage('Git Clone & Clean') {
            steps {
                bat "git clone https://github.com/Bharath-chandra997/maven_webproject"
                bat "mvn clean -f maven_webproject/pom.xml"
            }
        }

        stage('Install') {
            steps {
                bat "mvn install -f maven_webproject/pom.xml"
            }
        }

        stage('Test') {
            steps {
                bat "mvn test -f maven_webproject/pom.xml"
            }
        }

        stage('Package') {
            steps {
                bat "mvn package -f maven_webproject/pom.xml"
            }
        }
    }
}




//Working with Minikube (Nginx Service Deployment)	
minikube start
minikube status

kubectl create deployment nginx-deploy --image=nginx
kubectl get pods

kubectl expose deployment nginx-deploy --port=80 --target-port=80
kubectl get svc

kubectl port-forward svc/nginx-deploy 8090:80
# Open browser: http://localhost:8090

# New Terminal
kubectl get pods
kubectl get svc

q3
//Monitoring Tool – Nagios
docker pull jasonrivers/nagios
docker run --name nagios -d -p 8080:80 jasonrivers/nagios
docker ps

# If "name already in use"
docker rm -f nagios

# If port is in use
netstat -ano | findstr :8080
taskkill /PID <PID> /F

# Alternative port
docker run --name nagios -d -p 8090:80 jasonrivers/nagios


//user name = nagiosadmin
//password = magios





//email notification
open : https://myaccount.google.com/apppasswords =>generate password

✅ Part 1 — Configure Email Notification in a Job
Create a new job → choose Freestyle project
Name the job
Scroll to Post-build actions
Enable Email Notification
Add Recipient email (example: chandala.ruthwik@gmail.com)
Save the job and build it

✅ Part 2 — Global SMTP Configuration (Email Notification Heading)
Manage Jenkins → System → Email Notification
Open Manage Jenkins
Open System
Scroll to Email Notification section
Fill these:
SMTP Server:
smtp.gmail.com
Advanced:
Username: your Gmail
Password: 16-digit generated app password
Use SSL: enabled
SMTP Port:465
Reply-To Address: your Gmail
Test:
Enter any valid recipient email
Click Test configuration

✅ Part 3 — Extended Email Notification Section
Fill these:
SMTP Server:smtp.gmail.com
SMTP Port:465
Use SSL: enabled
Credentials:
Add your Gmail + App Password (16-digit)
Defaults:
Default content type: text / html / leave default
Default recipients: leave empty or add emails
=>Triggers you can enable:
Always
Failure – Any
Failure – X
Status changed
Success
Test improvement
Test regression
Unstable (test failure)
Failure → Success
